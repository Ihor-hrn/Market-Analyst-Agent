# MarketAnalystAgent v4.0

–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∞–Ω–∞–ª—ñ—Ç–∏–∫ –Ω–∞ –±–∞–∑—ñ LangChain AgentExecutor –∑ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–º –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è –¥—ñ–π —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤.

## –†–µ–≤–æ–ª—é—Ü—ñ–π–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ v4.0

### **LangChain AgentExecutor**
- **–ê–≤—Ç–æ–Ω–æ–º–Ω–µ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è**: AgentExecutor —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ –ø–ª–∞–Ω—É—î —Ç–∞ –≤–∏–∫–æ–Ω—É—î –¥—ñ—ó
- **Reasoning Loop**: "Thought ‚Üí Action ‚Üí Observation ‚Üí Final Answer"
- **Tool Selection**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±–∏—Ä–∞—î –ø–æ—Ç—Ä—ñ–±–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏
- **Multi-step Planning**: –í–∏–∫–æ–Ω—É—î —Å–∫–ª–∞–¥–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è –≤ –∫—ñ–ª—å–∫–∞ –∫—Ä–æ–∫—ñ–≤

### **–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏**
- **get_stock_price**: –†–µ–∞–ª—å–Ω—ñ —Ü—ñ–Ω–∏ –∞–∫—Ü—ñ–π —á–µ—Ä–µ–∑ Finage API
- **get_crypto_price**: –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ñ –∫–æ—Ç–∏—Ä—É–≤–∞–Ω–Ω—è  
- **get_stock_news**: –¢–∞—Ä–≥–µ—Ç–æ–≤–∞–Ω—ñ –Ω–æ–≤–∏–Ω–∏ –ø—Ä–æ –∫–æ–º–ø–∞–Ω—ñ—ó
- **get_market_summary**: –ó–∞–≥–∞–ª—å–Ω–∏–π –æ–≥–ª—è–¥ —Ä–∏–Ω–∫–æ–≤–æ—ó —Å–∏—Ç—É–∞—Ü—ñ—ó
- **analyze_sentiment**: –ê–Ω–∞–ª—ñ–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –Ω–æ–≤–∏–Ω

### **–ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–±–æ—Ç–∏ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞**
```
üë§ User: "–í–∞—Ä—Ç–æ –∫—É–ø–ª—è—Ç–∏ Apple –∑–∞—Ä–∞–∑?"

ü§ñ Agent Thinking: –©–æ–± –¥–∞—Ç–∏ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ–π–Ω—É –ø–æ—Ä–∞–¥—É, –º–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ:
1. –î—ñ–∑–Ω–∞—Ç–∏—Å—è –ø–æ—Ç–æ—á–Ω—É —Ü—ñ–Ω—É AAPL
2. –ó–Ω–∞–π—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ –Ω–æ–≤–∏–Ω–∏ –ø—Ä–æ Apple  
3. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ç–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –Ω–æ–≤–∏–Ω
4. –î–∞—Ç–∏ –æ–±“ë—Ä—É–Ω—Ç–æ–≤–∞–Ω—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é

üîß Action 1: get_stock_price("AAPL")
üìä Observation: AAPL: $208.35, +2.15 (+1.04%)

üîß Action 2: get_stock_news("Apple")  
üì∞ Observation: Apple announces new AI features...

üîß Action 3: analyze_sentiment(news_text)
üìà Observation: Bullish sentiment, positive AI news

üí° Final Answer: –ù–∞ –æ—Å–Ω–æ–≤—ñ –∞–Ω–∞–ª—ñ–∑—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —Ä–æ–∑–≥–ª—è–Ω—É—Ç–∏ –ø–æ–∫—É–ø–∫—É...
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **LangChain** - AgentExecutor –∑ planning —Ç–∞ tool selection
- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **OpenAI GPT-3.5-turbo** - reasoning —Ç–∞ –∞–Ω–∞–ª—ñ–∑
- **Twelve Data API** - —Ä–µ–∞–ª—å–Ω—ñ —Ä–∏–Ω–∫–æ–≤—ñ –¥–∞–Ω—ñ (–∞–∫—Ü—ñ—ó, –∫—Ä–∏–ø—Ç–æ, forex)
- **NewsData.io API** - –∞–∫—Ç—É–∞–ª—å–Ω—ñ –Ω–æ–≤–∏–Ω–∏
- **httpx** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ HTTP –∑–∞–ø–∏—Ç–∏
- **pydantic** - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É
```bash
git clone <your-repo-url>
cd MarketAnalystAgent
```

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
```bash
python -m venv venv
venv\Scripts\activate  # Windows
# –∞–±–æ
source venv/bin/activate  # Linux/macOS
```

### 3. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Ñ–∞–π–ª `.env` —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –≤–∞—à OpenAI API –∫–ª—é—á:

```env
OPENAI_API_KEY=your_openai_api_key_here
NEWSDATA_API_KEY=pub_271e70a34656433190b46688b240b422
TWELVE_DATA_API_KEY=82317a3ae68b4a96b821828d05e223fd
```

** –í–∞–∂–ª–∏–≤–æ**: –ó–∞–º—ñ–Ω—ñ—Ç—å `your_openai_api_key_here` –Ω–∞ –≤–∞—à —Å–ø—Ä–∞–≤–∂–Ω—ñ–π OpenAI API –∫–ª—é—á.

## –ó–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–∏–π —Ä–æ–∑–≤–∏—Ç–æ–∫
```bash
python main.py
```

–ê–±–æ –∑ uvicorn:
```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞: `http://localhost:8000`

### –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º
```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --workers 4
```

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ:
- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

## –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –∞–≥–µ–Ω—Ç–∞

### –¢–∏–ø–∏ –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

–ê–≥–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞–º—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –Ω–∞–¥–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å:

| –¢–∏–ø –∑–∞–ø–∏—Ç—É | –ü—Ä–∏–∫–ª–∞–¥–∏ | –©–æ —Ä–æ–±–∏—Ç—å –∞–≥–µ–Ω—Ç |
|------------|----------|-----------------|
| **–ê–Ω–∞–ª—ñ–∑ –Ω–æ–≤–∏–Ω** | "–©–æ –Ω–∞ —Ä–∏–Ω–∫—É?", "–†–∏–Ω–∫–æ–≤–∞ —Å–∏—Ç—É–∞—Ü—ñ—è" | –ó–±–∏—Ä–∞—î –Ω–æ–≤–∏–Ω–∏ ‚Üí –ê–Ω–∞–ª—ñ–∑—É—î —Ç–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å ‚Üí –ö–æ–º–ø–∞–∫—Ç–Ω–∏–π –∑–≤—ñ—Ç |
| **–¶—ñ–Ω–∏** | "–¶—ñ–Ω–∞ Apple", "–°–∫—ñ–ª—å–∫–∏ TSLA?" | –†–æ–∑–ø—ñ–∑–Ω–∞—î —Ç–∏–∫–µ—Ä ‚Üí –û—Ç—Ä–∏–º—É—î –∞–∫—Ç—É–∞–ª—å–Ω—É —Ü—ñ–Ω—É ‚Üí –§–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å |
| **–Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ–π–Ω—ñ –ø–æ—Ä–∞–¥–∏** | "–ö—É–¥–∏ –≤–∫–ª–∞–¥–∞—Ç–∏?", "–©–æ –∫—É–ø–∏—Ç–∏?" | –ê–Ω–∞–ª—ñ–∑—É—î –Ω–æ–≤–∏–Ω–∏ ‚Üí –ì–µ–Ω–µ—Ä—É—î –ø–æ—Ä–∞–¥–∏ ‚Üí –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó |
| **–°–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è** | "–ü—Ä–∏–≤—ñ—Ç", "–î—è–∫—É—é" | –î—Ä—É–∂–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ |
| **Fallback** | –ù–µ–∑—Ä–æ–∑—É–º—ñ–ª—ñ –∑–∞–ø–∏—Ç–∏ | –ü–æ—è—Å–Ω–µ–Ω–Ω—è –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥–∏ |

### **–ü—Ä–∏–∫–ª–∞–¥–∏ –Ω–æ–≤–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ v3.0**

| –ó–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | –©–æ —Ä–æ–±–∏—Ç—å –∞–≥–µ–Ω—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------------------|-----------------|-----------|
| "–í–∞—Ä—Ç–æ –≤–∫–ª–∞–¥–∞—Ç–∏ –≤ Apple?" | 1. –†–æ–∑–ø—ñ–∑–Ω–∞—î ‚Üí AAPL<br>2. –ü–ª–∞–Ω—É—î ‚Üí —Ü—ñ–Ω–∞ + –Ω–æ–≤–∏–Ω–∏ + –ø–æ—Ä–∞–¥–∏<br>3. –®—É–∫–∞—î –Ω–æ–≤–∏–Ω–∏ –ø—Ä–æ Apple<br>4. –ì–µ–Ω–µ—Ä—É—î –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ –ø–æ—Ä–∞–¥–∏ | üìä –ü–æ–≤–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –∑ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è–º–∏ |
| "–°–∫—ñ–ª—å–∫–∏ –∫–æ—à—Ç—É—î Bitcoin?" | 1. –†–æ–∑–ø—ñ–∑–Ω–∞—î ‚Üí BTCUSD<br>2. –ü–ª–∞–Ω—É—î ‚Üí —Ç—ñ–ª—å–∫–∏ —Ü—ñ–Ω–∞<br>3. –í–∏–∫–ª–∏–∫–∞—î Finage API | üí∞ –¢–æ—á–Ω–∞ —Ü—ñ–Ω–∞ –∑ –¥–∏–Ω–∞–º—ñ–∫–æ—é |
| "Rays trade deadline" | 1. –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Å–ª–æ–≤–Ω–∏–∫<br>2. –í–∏—è–≤–ª—è—î —Å–ø–æ—Ä—Ç–∏–≤–Ω—ñ —Å–ª–æ–≤–∞<br>3. –í—ñ–¥—Ö–∏–ª—è—î —è–∫ –Ω–µ-—Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏–π | üö´ "–¶–µ –Ω–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤" |
| "–©–æ —Ç–∞–º –Ω–∞ —Ä–∏–Ω–∫—É?" | 1. –ù–µ–º–∞—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–∫—Ç–∏–≤—É<br>2. –ü–ª–∞–Ω—É—î ‚Üí –∑–∞–≥–∞–ª—å–Ω—ñ –Ω–æ–≤–∏–Ω–∏<br>3. –ê–Ω–∞–ª—ñ–∑—É—î —Ç–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å | üìä –û–≥–ª—è–¥ —Ä–∏–Ω–∫–æ–≤–æ—ó —Å–∏—Ç—É–∞—Ü—ñ—ó |

### **–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –∞–∫—Ç–∏–≤–∏ (—Ä–æ–∑—à–∏—Ä–µ–Ω–æ)**

**–ê–∫—Ü—ñ—ó:**
- Apple (AAPL), Tesla (TSLA), Google (GOOGL), Microsoft (MSFT)
- Amazon (AMZN), Meta (META), NVIDIA (NVDA), Netflix (NFLX)
- AMD, Intel (INTC), Coinbase (COIN), Zoom (ZM), Uber, Airbnb (ABNB)

**–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∏:**
- Bitcoin (BTCUSD), Ethereum (ETHUSD), Cardano (ADAUSD)
- Solana (SOLUSD), Dogecoin (DOGEUSD)

**Forex:**
- EUR/USD (EURUSD), GBP/USD (GBPUSD), USD/JPY (USDJPY), USD/CAD (USDCAD)

**–ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞:**
- "Apple", "—è–±–ª–æ–∫–æ", "–µ–ø–ª" ‚Üí AAPL
- "Tesla", "—Ç–µ—Å–ª–∞", "–Ü–ª–æ–Ω –ú–∞—Å–∫" ‚Üí TSLA  
- "Bitcoin", "–±—ñ—Ç–∫–æ—ó–Ω", "BTC" ‚Üí BTCUSD

## Endpoints

### `POST /run` - –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π –∞–≥–µ–Ω—Ç

–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞–º—ñ—Ä —Ç–∞ –Ω–∞–¥–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –±–µ–∑ –∑–∞–π–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.

**–ó–∞–ø–∏—Ç:**
```json
{
  "messages": [
    {"role": "user", "content": "–û—Ü—ñ–Ω–∏ –æ—Å—Ç–∞–Ω–Ω—ñ –Ω–æ–≤–∏–Ω–∏ —Ä–∏–Ω–∫—É"}
  ]
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": {
    "role": "assistant", 
    "content": "üîç **–ê–Ω–∞–ª—ñ–∑ —Ä–∏–Ω–∫–æ–≤–æ—ó —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ**\n\nüìà **BULLISH —Å–∏–≥–Ω–∞–ª–∏ (1):**\n‚Ä¢ –ï–∫–æ–Ω–æ–º—ñ—á–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è... (NewsData.io)\n  ‚îî –ü–æ–∑–∏—Ç–∏–≤–Ω—ñ –µ–∫–æ–Ω–æ–º—ñ—á–Ω—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏...\n\nüìä **–ó–∞–≥–∞–ª—å–Ω–∏–π –≤–∏—Å–Ω–æ–≤–æ–∫:**\n–ü–µ—Ä–µ–≤–∞–∂–∞—é—Ç—å –ø–æ–∑–∏—Ç–∏–≤–Ω—ñ —Å–∏–≥–Ω–∞–ª–∏ –¥–ª—è —Ä–∏–Ω–∫—É."
  }
}
```

### `GET /news` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–∏–Ω

–ü–æ–≤–µ—Ä—Ç–∞—î –æ—Å—Ç–∞–Ω–Ω—ñ 3-6 –µ–∫–æ–Ω–æ–º—ñ—á–Ω–∏—Ö –Ω–æ–≤–∏–Ω –∑ —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª.

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
[
  {
    "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–∏–Ω–∏",
    "description": "–û–ø–∏—Å –Ω–æ–≤–∏–Ω–∏",
    "source": "NewsData.io",
    "published_at": "2024-01-15T10:30:00Z"
  }
]
```

### `GET /` - –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ API

–û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ñ endpoints.

## Telegram –±–æ—Ç

–ü—Ä–æ—î–∫—Ç –≤–∫–ª—é—á–∞—î –≥–æ—Ç–æ–≤–∏–π Telegram –±–æ—Ç –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –∞–≥–µ–Ω—Ç–æ–º.

### –ó–∞–ø—É—Å–∫ Telegram –±–æ—Ç–∞

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å –±–æ—Ç–∞ –≤ BotFather**:
   - –í—ñ–¥–∫—Ä–∏–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
   - –í–∏–∫–æ–Ω–∞–π—Ç–µ `/newbot` —Ç–∞ –æ—Ç—Ä–∏–º–∞–π—Ç–µ —Ç–æ–∫–µ–Ω

2. **–î–æ–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ .env**:
   ```env
   TELEGRAM_TOKEN=your_bot_token_here
   ```

3. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞**:
   ```bash
   python telegram_bot.py
   ```

### –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

- `/start` - –ø–æ—á–∞—Ç–æ–∫ —Ä–æ–±–æ—Ç–∏ –∑ –±–æ—Ç–æ–º
- `/help` - –¥–æ–≤—ñ–¥–∫–∞ —Ç–∞ –ø—Ä–∏–∫–ª–∞–¥–∏
- `/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü—Ä–∏–∫–ª–∞–¥–∏ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –±–æ—Ç–æ–º

```
ü§ñ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: –ü—Ä–∏–≤—ñ—Ç
ü§ñ –ë–æ—Ç: –í—ñ—Ç–∞—é! –Ø MarketAnalyst Agent. –ú–æ–∂—É –¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ –∞–Ω–∞–ª—ñ–∑–æ–º —Ä–∏–Ω–∫—É...

üí∞ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: –¶—ñ–Ω–∞ Apple
üí∞ –ë–æ—Ç: üí∞ AAPL: $208.35
       üìà +2.15 (+1.04%)
       ‚è∞ –û–Ω–æ–≤–ª–µ–Ω–æ: —â–æ–π–Ω–æ

üìä –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: –©–æ —Ç–∞–º –Ω–∞ —Ä–∏–Ω–∫—É?
üìä –ë–æ—Ç: üìä –†–∏–Ω–∫–æ–≤–∞ —Ç–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:
       üìà –ü–æ–∑–∏—Ç–∏–≤–Ω–∏–π –Ω–∞—Å—Ç—Ä—ñ–π (3 –∑ 5 –Ω–æ–≤–∏–Ω)
       –†–∏–Ω–æ–∫ —Å—Ö–∏–ª—å–Ω–∏–π –¥–æ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è.
```

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```bash
python example_usage.py
```

–í–∏–±–µ—Ä—ñ—Ç—å —Ç–∏–ø —Ç–µ—Å—Ç—É –∑ –º–µ–Ω—é:
- –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ API
- –¢–µ—Å—Ç –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–∏–Ω  
- –¢–µ—Å—Ç —ñ–Ω—Ç–µ–Ω—Ç-–¥–µ—Ç–µ–∫—Ü—ñ—ó
- –¢–µ—Å—Ç –∑–∞–ø–∏—Ç—ñ–≤ —Ü—ñ–Ω
- –¢–µ—Å—Ç —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ–π–Ω–∏—Ö –ø–æ—Ä–∞–¥

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ curl

```bash
# –¢–µ—Å—Ç –∞–Ω–∞–ª—ñ–∑—É —Ä–∏–Ω–∫—É
curl -X POST "http://localhost:8000/run" \
  -H "Content-Type: application/json" \
  -d '{"messages": [{"role": "user", "content": "–©–æ —Ç–∞–º –Ω–∞ —Ä–∏–Ω–∫—É?"}]}'

# –¢–µ—Å—Ç –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ü—ñ–Ω–∏
curl -X POST "http://localhost:8000/run" \
  -H "Content-Type: application/json" \
  -d '{"messages": [{"role": "user", "content": "–¶—ñ–Ω–∞ Apple"}]}'

# –¢–µ—Å—Ç –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–æ–≤–∏–Ω
curl -X GET "http://localhost:8000/news"
```

## –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (.env)

| –ó–º—ñ–Ω–Ω–∞ | –û–ø–∏—Å | –û–±–æ–≤'—è–∑–∫–æ–≤–∞ |
|--------|------|-------------|
| `OPENAI_API_KEY` | –ö–ª—é—á OpenAI API | ‚úÖ |
| `NEWSDATA_API_KEY` | –ö–ª—é—á NewsData.io API | ‚úÖ |
| `TWELVE_DATA_API_KEY` | –ö–ª—é—á Twelve Data API | ‚úÖ |

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–µ—à—É–≤–∞–Ω–Ω—è

–ù–æ–≤–∏–Ω–∏ –∫–µ—à—É—é—Ç—å—Å—è –Ω–∞ 5 —Ö–≤–∏–ª–∏–Ω –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó API –∑–∞–ø–∏—Ç—ñ–≤. –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –≤ `main.py`:

```python
CACHE_DURATION = 300  # —Å–µ–∫—É–Ω–¥–∏
```

## –Ø–∫ –ø—Ä–∞—Ü—é—î –∞–Ω–∞–ª—ñ–∑

1. **–ó–±—ñ—Ä –Ω–æ–≤–∏–Ω**: –ü–∞—Ä–∞–ª–µ–ª—å–Ω–æ –æ—Ç—Ä–∏–º—É—î –Ω–æ–≤–∏–Ω–∏ –∑ NewsData.io —Ç–∞ Finage
2. **–û–±—Ä–æ–±–∫–∞ —Ç–µ–∫—Å—Ç—É**: –û–±'—î–¥–Ω—É—î –∑–∞–≥–æ–ª–æ–≤–æ–∫ —ñ –æ–ø–∏—Å –Ω–æ–≤–∏–Ω–∏ 
3. **–ê–Ω–∞–ª—ñ–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î GPT-3.5-turbo –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
4. **–§–æ—Ä–º—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É**: –ì—Ä—É–ø—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞ —Ç–∏–ø–∞–º–∏ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ
5. **–í–∏—Å–Ω–æ–≤–∫–∏**: –ù–∞–¥–∞—î –∑–∞–≥–∞–ª—å–Ω—É –æ—Ü—ñ–Ω–∫—É —Ä–∏–Ω–∫–æ–≤–æ—ó —Å–∏—Ç—É–∞—Ü—ñ—ó

### –¢–∏–ø–∏ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ:
- **BULLISH**: –ü–æ–∑–∏—Ç–∏–≤–Ω–∏–π –≤–ø–ª–∏–≤ –Ω–∞ —Ä–∏–Ω–æ–∫
- **BEARISH**: –ù–µ–≥–∞—Ç–∏–≤–Ω–∏–π –≤–ø–ª–∏–≤ –Ω–∞ —Ä–∏–Ω–æ–∫  
- **NEUTRAL**: –ù–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π –∞–±–æ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–∏–π –≤–ø–ª–∏–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
MarketAnalystAgent/
‚îú‚îÄ‚îÄ main.py              # üöÄ FastAPI –∑ LangChain AgentExecutor
‚îú‚îÄ‚îÄ agent_tools.py       # üîß LangChain Tools (5 –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤)
‚îú‚îÄ‚îÄ tools.py             # üß† Legacy —Ñ—É–Ω–∫—Ü—ñ—ó (–∑–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ)
‚îú‚îÄ‚îÄ telegram_bot.py      # üí¨ Telegram –±–æ—Ç –∑ –∫–æ–º–∞–Ω–¥–∞–º–∏ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ—é  
‚îú‚îÄ‚îÄ requirements.txt     # üì¶ Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (+ LangChain)
‚îú‚îÄ‚îÄ .env.example         # ‚öôÔ∏è –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ .gitignore           # üîí Git —ñ–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ README.md            # üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ start_server.py      # ‚ñ∂Ô∏è –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞
‚îî‚îÄ‚îÄ example_usage.py     # üß™ –¢–µ—Å—Ç–∏ –¥–ª—è LangChain –∞–≥–µ–Ω—Ç–∞
```

### –ö–ª—é—á–æ–≤—ñ —Ñ–∞–π–ª–∏ v4.0:

- **`main.py`**: LangChain AgentExecutor –∑ –∞–≤—Ç–æ–Ω–æ–º–Ω–∏–º –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è
- **`agent_tools.py`**: 5 –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö Tools –¥–ª—è —Ä–∏–Ω–∫–æ–≤–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É
- **`telegram_bot.py`**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Telegram (–ø—ñ–¥—Ç—Ä–∏–º—É—î –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞)
- **`example_usage.py`**: –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è –¥—ñ–π

## –û–±–º–µ–∂–µ–Ω–Ω—è —Ç–∞ –ø–æ–º–∏–ª–∫–∏

### –ß–∞—Å—Ç—ñ –ø–æ–º–∏–ª–∫–∏:
- **401 Unauthorized**: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ OPENAI_API_KEY
- **429 Rate Limited**: –ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –ª—ñ–º—ñ—Ç –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ OpenAI
- **Timeout**: –ó–±—ñ–ª—å—à—ñ—Ç—å timeout –≤ httpx –∫–ª—ñ—î–Ω—Ç—ñ

### Rate Limits:
- OpenAI: –º–∞–∫—Å–∏–º—É–º 5 –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- NewsData.io: –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–∞ –ø–ª–∞–Ω–æ–º –ø—ñ–¥–ø–∏—Å–∫–∏
- Finage: –æ–±–º–µ–∂–µ–Ω–Ω—è –∑–∞ –ø–ª–∞–Ω–æ–º –ø—ñ–¥–ø–∏—Å–∫–∏

## –ë–µ–∑–ø–µ–∫–∞

- –ù—ñ–∫–æ–ª–∏ –Ω–µ –∫–æ–º—ñ—Ç—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ñ API –∫–ª—é—á—ñ –≤ git
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `.env` —Ñ–∞–π–ª–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏
- –î–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ environment variables
- –û–±–º–µ–∂—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ `/run` endpoint –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é API (`/docs`)
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –≤—Å—ñ API –∫–ª—é—á—ñ –∫–æ—Ä–µ–∫—Ç–Ω—ñ
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –¥–∏–≤—ñ—Ç—å—Å—è —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.#   M a r k e t - A n a l y s t - A g e n t 
 
 